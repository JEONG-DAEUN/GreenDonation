<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Index</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous"></script>
</head>
<body>
<fieldset>
    <legend>필수입력사항</legend>
    <div>
        <label for="memberId">아이디:
            <input id="memberId" name="memberId" type="text">
        </label>
    <div>
        <label for="memberPassword">패스워드:
            <input id="memberPassword" name="memberPassword" type="password">
        </label>
    </div>
    <div>
        <label for="name1">이름:
            <input id="name1" name="name1" type="text">
        </label>
    </div>

    <!--  <select id="type" name="type">-->
    <!--    <option value="1">일반회원</option>-->
    <!--    <option value="2">작가회원</option>-->
    <!--    <option value="3">업체회원</option>-->
    <!--  </select>-->

</fieldset>
<button class="btn btn-lg btn-primary btn-block" id="rgAdm">회원가입</button>

</body>


<script>
    $('#rgAdm').on("click",function() {
        const memberId = $('#memberId').val();
        const memberPassword = $('#memberPassword').val();
        const name1 = $("#name1").val();
        var type = 2;


        if(memberId == "" || memberPassword == "") {
            alert("아이디와 비밀번호는 필수기재사항입니다.");
        } else {
            const json = JSON.stringify({
                memberId: memberId,
                memberPassword: memberPassword,
                name1: name1,
                type: type
            })

            $.ajax({
                url: '/api/singUp',
                type: 'POST',
                dataType: 'text',
                contentType: "application/json; charset=utf-8",
                data: json,

                success: function(data) {
                    console.log(data)

                    if (data == "no") {
                        alert("이미 등록된 회원이 었습니다.");
                    }
                    else if (data == "ok"){
                        alert("회원 가입 완료!.");
                        alert("로그인 페이지로 이동합니다.");
                        window.location.href = '/Login';
                    }
                },
            })


        }
    });
</script>

</html>