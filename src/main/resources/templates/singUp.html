<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Index</title>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
          integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
          crossorigin="anonymous"></script>
</head>
<body>
<label>아이디</label>
<input type="text" name="id" id="id">
<label>비밀번호</label>
<input type="password" name="password" id="password">
<label>이름</label>
<input type="text" name="name" id="name">
<button>회원가입</button>

</body>
<script>
  $('#rgAdm').on("click",function() {
    const ai = $('#id').val();
    const ap = $('#password').val();
    const an = $("#name").val();

    if(ai == "" || ap == "") {
      alert("아이디와 비밀번호는 필수기재사항입니다.");
    } else {
      const json = JSON.stringify({
        id: ai,
        password: ap,
        name: an
    })

      $.ajax({
        url: '/api/singUp',
        type: 'POST',
        dataType: 'text',
        contentType: "application/json; charset=utf-8",
        data: json,
        success: function(data) {
          console.log(data)

          if (data == "no") {
            alert("이미 등록된 회원이 었습니다.");
          }
          else if (data == "ok"){
            alert("회원 가입 완료!.");
            alert("로그인 페이지로 이동합니다.");
            window.location.href = '/index.html';
          }
        },
      })


    }
  });
</script>

</html>